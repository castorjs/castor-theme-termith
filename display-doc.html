{% extends "layout.html" %}

{% block content %}

<!--end head block  -->
</head>
<body id="bodyBrowse">

    <div id="showOnClickDiv"></div>


    <div id="content" class="col-lg-11" style="border-top: 1px solid #fff;border-left: 1px solid #fff;">

            <!-- THE TITLE -->
            <div class="divHoverH1Display row col-lg-12">
                <h1 id="h1DisplayDocs">{{ item.content.json.TEI.teiHeader.fileDesc.titleStmt.title[0]['#text']|truncate( 99, False, '...') |d('Pas de titre pour ce documents') }}</h1>
            </div>

            <!-- LEFT BLOC -->
            <section id="leftSection" class="col-lg-4">

                <header id="headerInfoDisplayDocs">

                    <!-- AUTHORS BLOC -->
                    <div class="displayAuthor">

                        <span class="glyphicon glyphicon-user authorGliph"></span>
                        <div  class="authorsNameDisplayD">
                            {% if item.content.json.TEI.teiHeader.fileDesc.sourceDesc.biblStruct.analytic.author.persName.forename['#text'] %}
                                <span>{{item.content.json.TEI.teiHeader.fileDesc.sourceDesc.biblStruct.analytic.author.persName.forename['#text']|d('Pas d\'auteur') +" " + item.content.json.TEI.teiHeader.fileDesc.sourceDesc.biblStruct.analytic.author.persName.surname['#text']|d(" ") }} </span>
                            {% elif item.content.json.TEI.teiHeader.fileDesc.sourceDesc.biblStruct.analytic.author.persName[0] %}
                                {% for authors in item.content.json.TEI.teiHeader.fileDesc.sourceDesc.biblStruct.analytic.author.persName %}
                                    <span>{{ authors.forename['#text'] + ' ' + authors.surname['#text'] + '.' }}</span>
                                {% endfor %}
                            {% else %}
                                ?
                            {% endif %}
                        </div>

                    </div>

                    <!-- YEAR BLOC -->
                    <div class="displayYear">
                        <span class="glyphicon glyphicon-time timeGliph"></span>
                        <time class="timeInfoDispaly">{{item.content.json.TEI.teiHeader.fileDesc.publicationStmt.availability.licence["notBefore"]|d('Pas d\'année') }}</time>
                    </div>

                    <!-- MARK BLOC -->
                    <div class="displayMark">
                        <span class="glyphicon glyphicon-bookmark markGliph" style=""></span>
                        <div class="markInfoDisplay">{{ item.mark|d('/4') }}</div>
                    </div>

                    <!-- RESUM%E HEAD BLOC -->
                    <div class="divHoverResume" data-toggle="modal" data-target="#fullArticleModal">
                        <span class="glyphicon glyphicon-align-left resumeGliph"></span>
                        <h2 id="linkFullArticle">
                            Article Complet
                        </h2>
                    </div>

                </header>

                <!-- RESUME BLOC -->
                <section id="sectionArticle">

                    <article id="articleSectionResumeDisplay" style="">

                        <!--{% if item.content.json.TEI.teiHeader.profileDesc.abstract['xml#lang'] == 'fr' %}

                        <div class="frenchFlag"><span class="frenchFlagBlue"></span><span class="frenchFlagRed"></span></div>

                         {% elif item.content.json.TEI.teiHeader.profileDesc.abstract['xml#lang'] == 'en' %}

                        <div class="englandFlag"><div class="englandFlagVertical"></div><div class="englandFlagHorizontal"></div></div>

                        {% endif %} -->

                        <p>{{ item.content.json.TEI.teiHeader.profileDesc.abstract.p['#text']|d('Pas de résumé pour cet article') }}</p>

                    </article>

                </section>
            </section>

            <section id="keywordsSection" class="col-lg-8">

                        <span class="glyphicon glyphicon-tags keywordsGliph"></span>

                        <div id="keywordsDisplayDiv">

                            {%  for keywords in item.content.json.TEI.teiHeader.profileDesc.textClass.keywords %}

                                <div class="divForListKeywords">

                            {% if keywords.scheme == 'cc' %}

                            <h3 class="h3KeywordsDisplayDocs">Utilitaires:</h3>

                            <ul>

                                {%  for keywordsAdv in keywords.term %}

                                <li class="btn btn-default keywordsUtilsDisplay"> {{ keywordsAdv['#text']|d('de mots clés') }} </li>

                                {% endfor %}

                            </ul>

                            {% endif %}

                            {% if keywords.scheme == 'inist-francis' or keywords.scheme == 'inist-pascal' %}

                            <h3 class="h3KeywordsDisplayDocs">Mots Clés Inist</h3>

                            {% if keywords['xml#lang'] == 'fr' %}

                            <div class="frenchFlag"><span class="frenchFlagBlue"></span><span class="frenchFlagRed"></span></div>

                            {% endif %}

                            {% if keywords['xml#lang'] == 'en' %}

                            <div class="englandFlag"><div class="englandFlagVertical"></div><div class="englandFlagHorizontal"></div></div>

                            {% endif %}

                            <ul>

                                {%  for keywordsAdv in keywords.term %}

                                <li class="btn btn-default keywordsinistDisplay"> {{ keywordsAdv['#text']|d('de mots clés') }} </li>

                                {% endfor %}

                            </ul>

                            {% endif %}

                            {% if keywords.scheme == 'author' %}

                            <h3 class="h3KeywordsDisplayDocs">Mots Clés Auteur</h3>

                            {% if keywords['xml#lang'] == 'fr' %}

                            <div class="frenchFlag"><span class="frenchFlagBlue"></span><span class="frenchFlagRed"></span></div>

                            {% endif %}

                            {% if keywords['xml#lang'] == 'en' %}

                            <div class="englandFlag"><div class="englandFlagVertical"></div><div class="englandFlagHorizontal"></div></div>


                            {% endif %}

                            <ul>

                                {%  for keywordsAdv in keywords.term %}

                                <li class="btn btn-default keywordsAuthorsDisplay"> {{ keywordsAdv['#text']|d('de mots clés') }} </li>

                                {% endfor %}

                            </ul>

                            {% endif %}


                            {% if keywords.scheme == 'lina1:notice' %}

                            <h3 class="h3KeywordsDisplayDocs">Mots Clés Lina 1</h3>

                            {% if keywords['xml#lang'] == 'fr' %}

                            <div class="frenchFlag"><span class="frenchFlagBlue"></span><span class="frenchFlagRed"></span></div>

                            {% endif %}

                            {% if keywords['xml#lang'] == 'en' %}

                            <div class="englandFlag"><div class="englandFlagVertical"></div><div class="englandFlagHorizontal"></div></div>

                            {% endif %}

                            <ul>

                                {%  for keywordsAdv in keywords.term %}

                                <li class="btn btn-default keywordsLinasDisplay"> {{ keywordsAdv['#text']|d('de mots clés') }} </li>

                                {% endfor %}

                            </ul>

                            {% endif %}


                            {% if keywords.scheme == 'lina2:notice' %}

                            <h3 class="h3KeywordsDisplayDocs">Mots Clés Lina 2</h3>

                            {% if keywords['xml#lang'] == 'fr' %}

                            <div class="frenchFlag"><span class="frenchFlagBlue"></span><span class="frenchFlagRed"></span></div>

                            {% endif %}

                            {% if keywords['xml#lang'] == 'en' %}

                            <div class="englandFlag"><div class="englandFlagVertical"></div><div class="englandFlagHorizontal"></div></div>

                            {% endif %}


                            <ul>

                                {%  for keywordsAdv in keywords.term %}

                                <li class="btn btn-default keywordsLinasDisplay">{{ keywordsAdv['#text']|d('de mots clés') }} </li>

                                {% endfor %}

                            </ul>

                            {% endif %}

                                </div>

                            {% endfor %}
                    </div>
            </section>

            <div id="fullArticleModal" class="modal fade" aria-hidden="true" aria-labelledby="myModalLabel" role="dialog" tabindex="-2" style="display: none;">

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">ARTICLE COMPLET</h4>
            </div>
            <div class="modal-dialog">
                <div class="modal-content">
                    <article id="fullArticle" class="col-lg-12"></article>
                </div>
            </div>



            </div>



{% endblock %}

    {% block specificScript %}
        <script> var $ = jQuery = require('jquery'); </script>
        <script src="assets/js/parseWordPonct.function.js"></script>
        <script src="assets/js/parseGeneric.function.js"></script>
        <script src="assets/js/dmap.js"></script>
        <script src="assets/js/jquery.fs.scroller.min.js"></script>
        <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
            <script>

            $("#sectionArticle").scroller({
                customClass: "advanced",
            });

            $("#keywordsSection").scroller({
                customClass: "advanced",
            });

            window.b = 0;
           /* $("#sectionResumeDisplayDocs").click(function(){
                if(window.b === 0) {
                    $("#content").css({"opacity" : "0.2"});
                    window.b = 1;
                    $("#articleSectionResumeDisplay")
                            .appendTo("#showOnClickDiv").addClass('articleSectionResumeDisplayFull');
                    $("#showOnClickDiv").show().addClass('showOnClickDivView col-lg-10', 10000, 'easeInBack').css('background', '#bb9ff5');
                }
                else{
                    $("#content").css({"opacity" : "1"});
                    window.b = 0;
                }
            });*/

                $("#sectionResumeDisplayDocs").click(function () {
                    if(!(window.resumeClone)) {
                        var $theClone = jQuery(this).clone();
                        $theClone.appendTo('#showOnClickDiv');
                        $div = $('#showOnClickDiv');
                        $div.show().addClass('showOnClickDivView');
                        $div.find('h2').css({'background':'#fff', 'color': '#333'}).append('<span class="glyphicon glyphicon-remove crossToQuit"></span>');
                        $div.find('#sectionResumeDisplayDocs').removeClass('col-lg-6').addClass('col-lg-12').css('border' , '8px solid #fff');
                        $div.find('article').addClass('articleSectionResumeDisplayView').css('border', 'none');
                        $('#content').fadeTo( 500 , 0.12 );;
                        window.resumeClone = 1;
                    }
                });


        </script>
    {% endblock %}
