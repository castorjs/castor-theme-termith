//document.location.href = '/browse.html';
$(document).ready(function(){var e=window.navigator.userAgent.toLowerCase().indexOf("phantomjs")>-1||window.navigator.userAgent.toLowerCase().indexOf("chrome")>-1?!1:!0,a=$("#browseTable").dataTable({search:{regex:!0},ordering:!0,dom:"ilfrtp",info:!0,ajax:"/browse.json",serverSide:!0,lengthMenu:[15,1,3,5,10,25,50,100,200,500],language:{emptyTable:"Aucun document présent",lengthMenu:" _MENU_ Document(s) / page",search:"Rechercher:",zeroRecords:"Aucun résultat ...",info:"Il y a _TOTAL_ résultat(s)",infoFiltered:"( filtrés sur _MAX_ )",paginate:{previous:"Précédent",next:"Suivant"}},columns:[{data:"wid",visible:!1,searchable:!1},{data:"fields.validateSilence",visible:!1,searchable:!1},{data:"basename",className:"browseYear browseTd",searchable:!0},{data:"fields.title",className:"browseTitle browseTd",searchable:!0}],stateSave:e,fnCreatedRow:function(e,t,r){var n=a.fnGetData(r)
if("yes"==n.validateSilence)$(e).attr("class","trValidate")
else if("yes"==n.validatePertinence&&"no"==n.fields.validateSilence){var o=n.progressSilenceKeywords?100*parseFloat(n.progressSilenceKeywords)+"%":0
$(".browseTitle",e).css({background:"rgba(69,69,69,0.1",background:"-moz-linear-gradient(left, rgba(69,69,69,0.1) "+o+", transparent "+o+")",background:"-webkit-gradient(left top, right top, color-stop("+o+", rgba(69,69,69,0.1), color-stop("+o+", transparent)))",background:"-webkit-linear-gradient(left, rgba(69,69,69,0.1) "+o+", transparent "+o+")",background:"-o-linear-gradient(left, rgba(69,69,69,0.1) "+o+", transparent "+o+")",background:"-ms-linear-gradient(left, rgba(69,69,69,0.1) "+o+", transparent "+o+")",background:"linear-gradient(to right, rgba(69,69,69,0.1) "+o+", transparent "+o+")"})}else if("no"==n.fields.validatePertinence){var s=n.progressNotedKeywords?n.progressNotedKeywords:0
if(parseFloat(s)>0){var i=100*parseFloat(s)+"%"
$(".browseTitle",e).css({background:"rgba(136,203,195,0.5)",background:"-moz-linear-gradient(left, rgba(136,203,195,0.5) "+i+", transparent "+i+")",background:"-webkit-gradient(left top, right top, color-stop("+i+", rgba(136,203,195,0.5)), color-stop("+i+", transparent)))",background:"-webkit-linear-gradient(left, rgba(136,203,195,0.5) "+i+", transparent "+i+")",background:"-o-linear-gradient(left, rgba(136,203,195,0.5) "+i+", transparent "+i+")",background:"-ms-linear-gradient(left, rgba(136,203,195,0.5) "+i+", transparent "+i+")",background:"linear-gradient(to right, rgba(136,203,195,0.5) "+i+", transparent "+i+")"})}}},fnDrawCallback:function(){$("tbody tr").on("click",function(){var e=a.fnGetPosition(this),t=a.fnGetData(e)
document.location.href="/display/"+t.wid+".html"}).addClass("trBody")}}),t=$("#menuThead")
$("#browseChangeList").on("change",function(){"traites"==$(this).val()?(a.fnFilter("yes",1),e&&(localStorage.selecteur="traites")):"nonTraites"==$(this).val()?(a.fnFilter("no",1),e&&(localStorage.selecteur="nonTraites")):"tous"==$(this).val()&&(a.fnFilter("",1),e&&(localStorage.selecteur="tous"))}),$(window).scroll(function(){$(this).scrollTop()>541?t.addClass("fixedThead"):t.removeClass("fixedThead")})
var r=function(e){window.location=e.currentTarget.getAttribute("data-href")}
if($(".exportButtons").on("click",r),$("#exportButton").on("click",function(){$("#exportMenu").css("display","flex"),$("body").css("overflow","hidden")}),$("#exportQuit").on("click",function(){$("body").css("overflow",""),$("#exportMenu").hide()}),$(".showInformations").on("click",function(){$(this).hasClass("currentlyShowingInfos")?($(".informations").hide(),$(this).removeClass("currentlyShowingInfos")):($(".informations").show(),$(this).addClass("currentlyShowingInfos"))}),$(".informations").on("click",function(){var e=$(this).attr("data-id")
$(".informations").css("z-index","0"),$("#contentDisplay").css("display","none"),$("#"+e+" .imgInfos").length?$("#"+e).css("display","flex"):$("#"+e).prepend("<img src='"+$("#"+e).attr("data-src")+"' class='imgInfos'/>").delay(650).css("display","flex"),$("body").css("overflow","hidden")}),$(".infosQuit").on("click",function(){$("body").css("overflow",""),$(".informationsContent").hide(),$(".informations").css("z-index","")}),localStorage.selecteur)switch(localStorage.selecteur){case"traites":$("#browseChangeList option")[1].selected=!0
break
case"nonTraites":$("#browseChangeList option")[2].selected=!0
break
case"tous":$("#browseChangeList option")[0].selected=!0}})
