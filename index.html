{% extends "layout.html" %}

{% block content %}
    <!--end head block  -->
    </head>
    <body id="bodyBrowse">

        <header>
            <nav>
                <ul>
                    <li>
                        <a href=""></a>
                    </li>
                    <li>
                        <a href=""></a>
                    </li>
                </ul>
            </nav>
        </header>

        <!-- start body content -->
        <div class="col-lg-9" id="BrowseDocuBigDiv">
            <h1 id="h1Browse" class="col-lg-11">L<span style="color: #FF8E80;">i</span>ste d<span style="color: #99E5DB">e</span>s <span style="color: #FF917F">d</span>ocuments</h1>

            <div id="divOverTableBrowse" class="col-lg-12">
                <table id="browseTable" width="100%">
                    <thead id="menuThead">
                        <tr>
                            <th class="browseNumbTh col-lg-1">N°</th>
                            <th class="browseYearTh  col-lg-2">DOCUMENT</th>
                            <th class="browseTitleTh  col-lg-6">TITRE</th>
                        </tr>
                    </thead>
                    <tbody>
                    <tr class="trBody" data-href="">
                    </tr>
                    </tbody>
               </table>
            </div>
        </div>

{% endblock %}

{% block scripts %}
<script> var $ = jQuery = require('jquery'); </script>
<script src="./assets/js/jquery.dataTables.js"></script>
<script src="./assets/js/dataTables.bootstrap.js"></script>
<script>
//document.location.href = '/browse.html';

$(document).ready(function() {

		  var oTable = $('#browseTable').dataTable({
			ordering: true,
            info : false,
			ajax: "/browse.json",
            serverSide: true,
            lengthMenu : [15,1,3,5,10,25,50,100,200,500],
            "language": {
                "lengthMenu": " _MENU_ Documents/Page",
                "search": "Rechercher:",
                "paginate": {
                  "previous": "Précédent",
                  "next" : "Suivant",
              }
            },
			columns: [
				{ data: 'wid' , className: "browseNumb browseTd" , visible : false},
				{ data: 'object' , className: "browseYear browseTd"},
				{ data: 'fields.title' , className: "browseTitle browseTd" }
			],

            "rowCallback": function ( row ) {
            },

            "fnDrawCallback": function(){
                $('tbody tr').on('click',function() {
                    //var id = $(this).find('td:first').text();
                    var position =  oTable.fnGetPosition(this);
                    var docID = oTable.fnGetData( position );
                    document.location.href = "/display/" + docID.wid + '.html';
                }).addClass('trBody');



                $('.trBody').hover(function() {
                    $(this).css('cursor', 'pointer');
                }, function() {
                    $(this).css('cursor', 'auto');
                });
            }
		});

        var thead = $('#menuThead');

        $(window).scroll(function () {
            if ($(this).scrollTop() > 381) {
                thead.addClass("fixedThead");
            } else {
                thead.removeClass("fixedThead");
            }
        });
});

</script>
{% endblock %}

